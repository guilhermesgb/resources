#### TESTES para RECURSOS ####

#criar tipo de recurso
expectError "Descrição de tipo de recurso inválida (não pode ser nulo), Nome de tipo de recurso inválido (não pode ser vazio)!" criarTipoRecurso nome= descricao=
expectError "Nome de tipo de recurso inválido (não pode ser vazio)!" criarTipoRecurso nome= descricao=wewe
expectError "Descrição de tipo de recurso inválida (não pode ser nulo)!" criarTipoRecurso nome=sdsd descricao=
idTR1=criarTipoRecurso nome=teste1 descricao=teste2

#remover tipo de recurso sem atributos
removerTipoRecurso  idTipoRecurso=${idTR1}
expectError "Tipo de recurso não encontrado!" removerTipoRecurso  idTipoRecurso=${idTR1}
idTR1=criarTipoRecurso  nome=teste1 descricao=teste2

#alterar tipo de recurso

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]" 

expectError "Propriedade 'nome' de definição de atributo inválida (não pode ser repetida)!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2  atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"},{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]"

expectError "Propriedade 'nome' de definição de atributo inválida (não pode ser vazio)!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]"

expectError "Propriedade 'nome' de definição de tipo de atributo inválida (não pode ser vazio e deve ser um dos seguintes valores: TEXT, NUMBER ou DATE)!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"sdsds\",\"type\":\"\",\"mandatory\":\"true\"}]"

expectError "Propriedade 'mandatório' de definição de atributo inválida (não pode ser vazio e deve ser um exatamente 'true' ou 'false')!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"sdsds\",\"type\":\"TEXT\",\"mandatory\":\"\"}]"

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"false\"},{\"name\":\"texto\",\"type\":\"TEXT\",\"mandatory\":\"true\"}]"

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]"

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"dia\",\"type\":\"DATE\",\"mandatory\":\"true\"}]"

#remover tipo de recurso

removerTipoRecurso  idTipoRecurso=${idTR1}
expectError "Tipo de recurso não encontrado!" removerTipoRecurso  idTipoRecurso=${idTR1}

##
#criando recursos e garantindo que não pode remover atributos utilizados
#testando com o atributo texto

expectError "Tipo de recurso não encontrado!" idR1=criarRecurso  idTipoRecurso=${idTR1} atributos="{\"texto\":\"teste\"}"

idTR1=criarTipoRecurso  nome=teste1 descricao=teste2
alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"texto\",\"type\":\"TEXT\",\"mandatory\":\"true\"}]"

expectError "Atributo de nome 'texto', cujo tipo é 'TEXT' é mandatório (não pode ser nulo nem vazio)!" criarRecurso  idTipoRecurso=${idTR1} atributos="{\"texto\":\"\"}"

idR1=criarRecurso  idTipoRecurso=${idTR1} atributos="{\"texto\":\"teste\"}"

expectError "Atributo de nome 'texto', cujo tipo é 'TEXT' não pode ser removido, porque '1' recursos o possuem!" alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[]"

removerRecurso  idRecurso=${idR1}

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[]" 

##
#atributo data

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"data\",\"type\":\"DATE\",\"mandatory\":\"true\"}]"

expectError "Valor inválido para o atributo 'data' (é do tipo 'DATE', então o valor não pode ser: 'teste')!" criarRecurso  idTipoRecurso=${idTR1} atributos="{\"data\":\"teste\"}"

expectError "Atributo de nome 'data', cujo tipo é 'DATE' é mandatório (não pode ser nulo nem vazio)!" criarRecurso  idTipoRecurso=${idTR1} atributos="{\"data\":\"\"}"

expectError "Atributo de nome 'data', cujo tipo é 'DATE' é mandatório (não pode ser nulo nem vazio)!" criarRecurso  idTipoRecurso=${idTR1} atributos="{}"

idR1=criarRecurso  idTipoRecurso=${idTR1} atributos="{\"data\":\"10/10/2014\"}"

expectError "Atributo de nome 'data', cujo tipo é 'DATE' não pode ser removido, porque '1' recursos o possuem!" alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[]"

removerRecurso  idRecurso=${idR1} 

##
#atributo número

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"data\",\"type\":\"NUMBER\",\"mandatory\":\"false\"}]"

expectError "Valor inválido para o atributo 'data' (é do tipo 'NUMBER', então o valor não pode ser: '10/10/2015')!" criarRecurso  idTipoRecurso=${idTR1} atributos="{\"data\":\"10/10/2015\"}"

idR1=criarRecurso  idTipoRecurso=${idTR1} atributos="{\"data\":\"12\"}"

alterarRecurso  idRecurso=${idR1} atributos="{\"data\":\"\"}"

expectError "Valor inválido para o atributo 'data' (é do tipo 'NUMBER', então o valor não pode ser: 'texto')!" alterarRecurso  idRecurso=${idR1} atributos="{\"data\":\"texto\"}"

removerRecurso  idRecurso=${idR1}

##
#criando recursos com vários atributos

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"idade\",\"type\":\"NUMBER\",\"mandatory\":\"true\"},{\"name\":\"data\",\"type\":\"DATE\",\"mandatory\":\"false\"},{\"name\":\"nome\",\"type\":\"TEXT\",\"mandatory\":\"true\"}]"

idR1=criarRecurso  idTipoRecurso=${idTR1} atributos="{\"idade\":\"12\", \"nome\":\"joao\", \"data\":\"12/12/2013\"}"

#alterar recurso

alterarRecurso  idRecurso=${idR1} atributos="{\"idade\":\"23\", \"nome\":\"jose\", \"data\":\"13/12/2013\"}"

alterarRecurso  idRecurso=${idR1} atributos="{\"idade\":\"23\", \"nome\":\"jose\", \"data\":\"\"}"

#alterar com valores incorretos

expectError "Recurso de nome 'teste1' não tem nenhum atributo com nome 'dataNaoExiste' (cujo valor seria: '12/12/2013')!" criarRecurso  idTipoRecurso=${idTR1} atributos="{\"idade\":\"12\",\"nome\":\"joao\",\"data\":\"12/12/2013\",\"dataNaoExiste\":\"12/12/2013\"}"

expectError "Atributo de nome 'nome', cujo tipo é 'TEXT' é mandatório (não pode ser nulo nem vazio)!" alterarRecurso  idRecurso=${idR1} atributos="{\"idade\":\"23\",\"nome\":\"\",\"data\":\"13/12/2013\"}"

expectError "Atributo de nome 'nome', cujo tipo é 'TEXT' é mandatório (não pode ser nulo nem vazio)!" alterarRecurso  idRecurso=${idR1} atributos="{\"idade\":\"23\",\"nome\":\"\",\"data\":\"\"}"

expectError "Atributo de nome 'idade', cujo tipo é 'NUMBER' é mandatório (não pode ser nulo nem vazio), Atributo de nome 'nome', cujo tipo é 'TEXT' é mandatório (não pode ser nulo nem vazio)!" alterarRecurso  idRecurso=${idR1} atributos="{\"idade\":\"\",\"nome\":\"\",\"data\":\"13/12/2013\"}"

expectError "Atributo de nome 'idade', cujo tipo é 'NUMBER' é mandatório (não pode ser nulo nem vazio), Atributo de nome 'nome', cujo tipo é 'TEXT' é mandatório (não pode ser nulo nem vazio)!" alterarRecurso  idRecurso=${idR1} atributos="{\"idade\":\"\",\"nome\":\"\"}"

#remover tipo de recurso utilizado

expectError "Tipo de recurso de nome 'teste1' não pode ser removido, porque foram criados recursos desse tipo!" removerTipoRecurso  idTipoRecurso=${idTR1}

#remover recursos e tipos de recursos

removerRecurso  idRecurso=${idR1}
removerTipoRecurso  idTipoRecurso=${idTR1}

##########################