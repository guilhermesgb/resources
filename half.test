#### TESTES para RECURSOS ####

#criar tipo de recurso
expectError "Invalid name (cannot be empty)!" criarTipoRecurso nome= descricao=
expectError "Invalid name (cannot be empty)!" criarTipoRecurso nome= descricao=wewe
expectError "Invalid description (cannot be empty)!" criarTipoRecurso nome=sdsd descricao=
idTR1=criarTipoRecurso nome=teste1 descricao=teste2

#remover tipo de recurso sem atributos
removerTipoRecurso  idTipoRecurso=${idTR1}
expectError "ResourceType not found!" removerTipoRecurso  idTipoRecurso=${idTR1}
idTR1=criarTipoRecurso  nome=teste1 descricao=teste2

#alterar tipo de recurso

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]" 

expectError "Invalid ResourceTypeAttribute 'name' (must be unique)!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2  atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"},{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]"

expectError "Invalid ResourceTypeAttribute 'name' (cannot be empty)!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]"

expectError "Invalid ResourceTypeAttribute 'type' (cannot be empty and must one of 'TEXT', 'NUMBER' or 'DATE')!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"sdsds\",\"type\":\"\",\"mandatory\":\"true\"}]"

expectError "Invalid ResourceTypeAttribute 'mandatory' (cannot be empty, must be exactly equal to 'true' or 'false')!" alterarTipoRecurso idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"sdsds\",\"type\":\"TEXT\",\"mandatory\":\"\"}]"

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"false\"},{\"name\":\"texto\",\"type\":\"TEXT\",\"mandatory\":\"true\"}]"

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"nome\",\"type\":\"NUMBER\",\"mandatory\":\"true\"}]"

alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"dia\",\"type\":\"DATE\",\"mandatory\":\"true\"}]"

#remover tipo de recurso

removerTipoRecurso  idTipoRecurso=${idTR1}
expectError "ResourceType not found!" removerTipoRecurso  idTipoRecurso=${idTR1}

##
#criando recursos e garantindo que não pode remover atributos utilizados
#testando com o atributo texto

expectError "ResourceType not found!" idR1=criarRecurso  idTipoRecurso=${idTR1} atributos="{\"texto\":\"teste\"}"

idTR1=criarTipoRecurso  nome=teste1 descricao=teste2
alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[{\"name\":\"texto\",\"type\":\"TEXT\",\"mandatory\":\"true\"}]"

expectError "ResourceAttribute 'texto' of type 'TEXT' is mandatory (cannot be null or empty)!" criarRecurso  idTipoRecurso=${idTR1} atributos="{\"texto\":\"\"}"

idR1=criarRecurso  idTipoRecurso=${idTR1} atributos="{\"texto\":\"teste\"}"

expectError "Não pode remover atributo, pois existe um recurso o utilizando!" alterarTipoRecurso  idTipoRecurso=${idTR1} nome=teste1 descricao=teste2 atributos="[]"